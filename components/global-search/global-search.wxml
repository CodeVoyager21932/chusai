<!-- 搜索弹窗 -->
<view wx:if="{{showSearch}}" class="search-modal" bindtap="closeSearch">
  <view class="modal-content" catchtap="stopPropagation">
    <!-- 自定义导航栏 - 动态适配状态栏和胶囊按钮 -->
    <view class="search-header" style="padding-top: {{statusBarHeight}}px;">
      <view class="header-content" style="height: {{navBarHeight}}px; padding-right: {{searchContainerPaddingRight}}px;">
        <!-- 搜索输入框 -->
        <view class="search-input-box">
          <image class="search-icon" src="/images/icons/search.png" mode="aspectFit"></image>
          <input 
            class="search-input"
            placeholder="搜索人物、事件、地点..."
            placeholder-class="input-placeholder"
            value="{{keyword}}"
            bindinput="onInput"
            bindconfirm="onSearch"
            focus="{{showSearch}}"
          />
        </view>
        <!-- 取消按钮 -->
        <text class="cancel-btn" bindtap="closeSearch">取消</text>
      </view>
    </view>

    <!-- 搜索结果区域 - 需要留出头部空间 -->
    <view class="search-body" style="padding-top: {{statusBarHeight + navBarHeight}}px;">
      <scroll-view class="search-results" scroll-y wx:if="{{results.length > 0}}">
        <view wx:for="{{results}}" wx:key="id" 
              class="result-item"
              bindtap="selectResult" data-item="{{item}}">
          <view class="result-icon">{{item.icon}}</view>
          <view class="result-info">
            <text class="result-title">{{item.title}}</text>
            <view class="result-meta">
              <text class="result-type">{{item.type}}</text>
              <text class="result-tag" wx:if="{{item.tag}}">{{item.tag}}</text>
            </view>
          </view>
        </view>
      </scroll-view>

      <view wx:elif="{{hasSearched && keyword}}" class="empty-hint">
        <text>未找到相关内容</text>
      </view>

      <view wx:elif="{{!hasSearched}}" class="search-tips">
        <text class="tips-title">热门搜索</text>
        <view class="tips-tags">
          <text 
            wx:for="{{hotTags}}" 
            wx:key="*this" 
            class="tip-tag" 
            data-keyword="{{item}}"
            bindtap="handleTagClick"
          >{{item}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
